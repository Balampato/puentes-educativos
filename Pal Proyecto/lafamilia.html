<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fam√≠lia 1 - Aprendiendo los Pronombres Familiares</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Chilanka', 'Segoe UI', sans-serif;
        }

        :root {
            --primary: #FF7BAC;
            --secondary: #6C63FF;
            --accent1: #FFD166;
            --accent2: #06D6A0;
            --accent3: #118AB2;
            --accent4: #EF476F;
            --dark: #5A189A;
            --light: #FFF9FB;
            --text-dark: #2D3047;
            --text-light: #FFF9FB;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 20px;
        }

        body {
            background-color: var(--light);
            color: var(--text-dark);
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background-image: radial-gradient(circle at 90% 10%, rgba(255, 123, 172, 0.15) 0%, rgba(255, 255, 255, 0) 70%);
        }

        .header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            color: var(--text-light);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: "‚ù§Ô∏è";
            position: absolute;
            font-size: 8rem;
            opacity: 0.1;
            top: 10px;
            right: 10px;
            transform: rotate(20deg);
        }

        .header::after {
            content: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶";
            position: absolute;
            font-size: 6rem;
            opacity: 0.1;
            bottom: 10px;
            left: 10px;
            transform: rotate(-15deg);
        }

        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.8rem;
            margin-bottom: 15px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .year-badge {
            display: inline-block;
            background-color: var(--accent1);
            color: var(--dark);
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.4rem;
            margin-top: 10px;
            position: relative;
            z-index: 1;
        }

        .accessibility-bar {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            position: relative;
            z-index: 1;
        }

        .accessibility-btn {
            background-color: var(--dark);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1.1rem;
        }

        .accessibility-btn:hover, .accessibility-btn:focus {
            transform: scale(1.05);
            background-color: var(--accent2);
            color: var(--dark);
            outline: 3px solid var(--accent1);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 900px) {
            .main-content {
                grid-template-columns: 2fr 1fr;
            }
        }

        .family-container {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border: 6px solid var(--accent1);
        }

        .section-title {
            color: var(--dark);
            font-size: 2.2rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 5px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .pronouns-intro {
            background-color: #F0F7FF;
            padding: 25px;
            border-radius: 18px;
            margin-bottom: 30px;
            border-left: 8px solid var(--secondary);
        }

        .pronouns-intro h3 {
            color: var(--dark);
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pronouns-intro p {
            font-size: 1.4rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .family-members {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .family-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 18px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            border: 4px solid transparent;
            transition: all 0.4s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .family-card:hover, .family-card:focus {
            transform: translateY(-10px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--accent2);
            outline: none;
        }

        .family-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary), var(--accent3));
        }

        .family-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--dark);
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .family-name {
            font-size: 2rem;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .family-pronoun {
            font-size: 1.8rem;
            color: var(--secondary);
            margin-bottom: 10px;
            font-weight: bold;
        }

        .family-translation {
            font-size: 1.4rem;
            color: var(--text-dark);
            opacity: 0.9;
        }

        .notes-container {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border: 6px solid var(--accent2);
        }

        .notes-list {
            list-style-type: none;
            margin-top: 20px;
        }

        .notes-list li {
            background-color: #FFF5F7;
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 15px;
            border-left: 10px solid var(--accent4);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s;
        }

        .notes-list li:hover {
            transform: translateX(10px);
            background-color: #FFE8ED;
        }

        .notes-list i {
            color: var(--accent4);
            font-size: 1.8rem;
            min-width: 40px;
        }

        .interactive-zone {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin-top: 30px;
            box-shadow: var(--shadow);
            border: 6px solid var(--accent3);
            grid-column: 1 / -1;
        }

        .family-tree {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            padding: 30px;
            background-color: #F8F0FF;
            border-radius: var(--border-radius);
            min-height: 300px;
            position: relative;
        }

        .tree-visual {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 800px;
        }

        .tree-person {
            width: 120px;
            padding: 15px;
            background-color: white;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: 3px solid var(--accent1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .tree-person:hover {
            transform: scale(1.1);
            border-color: var(--secondary);
        }

        .tree-person-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .tree-person-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--dark);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .control-btn {
            padding: 20px 30px;
            font-size: 1.5rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s;
            min-width: 240px;
            justify-content: center;
        }

        .control-btn:hover, .control-btn:focus {
            transform: scale(1.05);
            outline: 4px solid var(--accent1);
        }

        .btn-family {
            background-color: var(--primary);
            color: white;
        }

        .btn-pronouns {
            background-color: var(--secondary);
            color: white;
        }

        .btn-quiz {
            background-color: var(--accent2);
            color: var(--dark);
        }

        .feedback {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background-color: #F0F7FF;
            border-radius: var(--border-radius);
            border: 3px dashed var(--secondary);
            font-size: 1.6rem;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .instructions {
            background-color: #FFF9E6;
            padding: 25px;
            border-radius: var(--border-radius);
            margin-top: 25px;
            border-left: 10px solid var(--accent1);
            font-size: 1.4rem;
        }

        .instructions h3 {
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: var(--dark);
            font-size: 1.3rem;
            border-top: 4px solid var(--secondary);
        }

        /* Modo alto contraste */
        .high-contrast {
            background-color: black;
            color: #FFFF00;
            background-image: none;
        }

        .high-contrast .header {
            background: black;
            color: #FFFF00;
            border: 3px solid #FFFF00;
        }

        .high-contrast .family-container,
        .high-contrast .notes-container,
        .high-contrast .interactive-zone {
            background-color: black;
            color: #FFFF00;
            border-color: #FFFF00;
        }

        .high-contrast .family-card,
        .high-contrast .notes-list li {
            background-color: black;
            color: #FFFF00;
            border-color: #FFFF00;
        }

        .high-contrast .tree-person {
            background-color: black;
            color: #FFFF00;
            border-color: #FFFF00;
        }

        /* Texto grande */
        .large-text {
            font-size: 1.6rem;
        }

        .large-text h1 {
            font-size: 4rem;
        }

        .large-text .section-title {
            font-size: 2.8rem;
        }

        .large-text .family-name {
            font-size: 2.5rem;
        }

        .large-text .family-pronoun {
            font-size: 2.2rem;
        }

        /* Focus visible para accesibilidad */
        button:focus, .family-card:focus, .tree-person:focus {
            outline: 4px solid var(--accent2);
            outline-offset: 3px;
        }

        /* Animaci√≥n para feedback */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }

        /* Efecto de selecci√≥n */
        .selected {
            border-color: var(--accent4) !important;
            box-shadow: 0 0 0 5px rgba(239, 71, 111, 0.3) !important;
            background: linear-gradient(135deg, #FFF5F7 0%, #ffffff 100%) !important;
        }

        /* Indicadores t√°ctiles */
        .touch-indicator {
            width: 50px;
            height: 50px;
            background-color: var(--accent1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark);
            font-weight: bold;
            margin: 0 auto 15px;
            font-size: 1.6rem;
        }

        /* L√≠neas del √°rbol familiar */
        .tree-connector {
            position: absolute;
            background-color: var(--accent3);
            z-index: -1;
        }

        /* Para la actividad de emparejamiento */
        .matching-game {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .matching-card {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 3px solid var(--accent1);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.4rem;
            font-weight: bold;
        }

        .matching-card:hover {
            transform: scale(1.05);
            border-color: var(--secondary);
        }
    </style>
</head>
<body>
    <header class="header" role="banner">
        <h1><i class="fas fa-users"></i> Fam√≠lia 1 <i class="fas fa-users"></i></h1>
        <p class="subtitle">Pronombres familiares - Aprendiendo los miembros de la familia</p>
        <div class="year-badge">U: 2023</div>
        
        <div class="accessibility-bar" role="toolbar" aria-label="Herramientas de accesibilidad">
            <button class="accessibility-btn" id="highContrastBtn" aria-label="Activar modo alto contraste">
                <i class="fas fa-adjust"></i> Alto Contraste
            </button>
            <button class="accessibility-btn" id="largeTextBtn" aria-label="Aumentar tama√±o de texto">
                <i class="fas fa-text-height"></i> Texto Grande
            </button>
            <button class="accessibility-btn" id="speakAllBtn" aria-label="Escuchar todos los miembros de la familia">
                <i class="fas fa-volume-up"></i> Leer Todo
            </button>
            <button class="accessibility-btn" id="resetBtn" aria-label="Restablecer configuraci√≥n">
                <i class="fas fa-redo"></i> Reiniciar
            </button>
        </div>
    </header>

    <main class="main-content" role="main">
        <section class="family-container" aria-labelledby="family-title">
            <h2 id="family-title" class="section-title"><i class="fas fa-heart"></i> Pronombres Familiares</h2>
            
            <div class="pronouns-intro">
                <h3><i class="fas fa-microphone-alt"></i> Pronuncia cl√°usula</h3>
                <p><i class="fas fa-language"></i> <strong>Traduzido:</strong> Aprende a pronunciar y traducir los nombres de los miembros de la familia.</p>
                <p><i class="fas fa-lightbulb"></i> <strong>Tip:</strong> Toca cualquier miembro de la familia para escuchar su nombre y pronunciaci√≥n.</p>
            </div>
            
            <h3 class="section-title" style="font-size: 1.8rem; margin-top: 30px;"><i class="fas fa-home"></i> Fam√≠lia (grande)</h3>
            
            <div class="family-members">
                <!-- Miembros de la familia originales -->
                <div class="family-card" tabindex="0" role="button" aria-label="Pap√°, se pronuncia dad, significa padre">
                    <div class="touch-indicator">1</div>
                    <div class="family-icon">
                        <i class="fas fa-male"></i>
                    </div>
                    <div class="family-name">Pap√°</div>
                    <div class="family-pronoun">Dad</div>
                    <div class="family-translation">Padre</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="Mam√°, se pronuncia mom, significa madre">
                    <div class="touch-indicator">2</div>
                    <div class="family-icon">
                        <i class="fas fa-female"></i>
                    </div>
                    <div class="family-name">Mam√°</div>
                    <div class="family-pronoun">Mom</div>
                    <div class="family-translation">Madre</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="Hermano, se pronuncia bro, significa hermano">
                    <div class="touch-indicator">3</div>
                    <div class="family-icon">
                        <i class="fas fa-male"></i>
                    </div>
                    <div class="family-name">Hermano</div>
                    <div class="family-pronoun">Bro</div>
                    <div class="family-translation">Hermano</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="Hermana, se pronuncia sister, significa hermana">
                    <div class="touch-indicator">4</div>
                    <div class="family-icon">
                        <i class="fas fa-female"></i>
                    </div>
                    <div class="family-name">Hermana</div>
                    <div class="family-pronoun">Sister</div>
                    <div class="family-translation">Hermana</div>
                </div>
                
                <!-- Miembros de familia adicionales -->
                <div class="family-card" tabindex="0" role="button" aria-label="Abuelo, se pronuncia grandad, significa abuelo">
                    <div class="touch-indicator">5</div>
                    <div class="family-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="family-name">Abuelo</div>
                    <div class="family-pronoun">Grandad</div>
                    <div class="family-translation">Abuelo</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="Abuela, se pronuncia grandma, significa abuela">
                    <div class="touch-indicator">6</div>
                    <div class="family-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="family-name">Abuela</div>
                    <div class="family-pronoun">Grandma</div>
                    <div class="family-translation">Abuela</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="T√≠o, se pronuncia uncle, significa t√≠o">
                    <div class="touch-indicator">7</div>
                    <div class="family-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="family-name">T√≠o</div>
                    <div class="family-pronoun">Uncle</div>
                    <div class="family-translation">T√≠o</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="T√≠a, se pronuncia aunt, significa t√≠a">
                    <div class="touch-indicator">8</div>
                    <div class="family-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="family-name">T√≠a</div>
                    <div class="family-pronoun">Aunt</div>
                    <div class="family-translation">T√≠a</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="Primo, se pronuncia cousin, significa primo">
                    <div class="touch-indicator">9</div>
                    <div class="family-icon">
                        <i class="fas fa-child"></i>
                    </div>
                    <div class="family-name">Primo</div>
                    <div class="family-pronoun">Cousin</div>
                    <div class="family-translation">Primo/Prima</div>
                </div>
                
                <div class="family-card" tabindex="0" role="button" aria-label="Beb√©, se pronuncia baby, significa beb√©">
                    <div class="touch-indicator">10</div>
                    <div class="family-icon">
                        <i class="fas fa-baby"></i>
                    </div>
                    <div class="family-name">Beb√©</div>
                    <div class="family-pronoun">Baby</div>
                    <div class="family-translation">Beb√©</div>
                </div>
            </div>
        </section>

        <section class="notes-container" aria-labelledby="notes-title">
            <h2 id="notes-title" class="section-title"><i class="fas fa-sticky-note"></i> Notas Familiares</h2>
            
            <div class="pronouns-intro" style="margin-bottom: 20px;">
                <h3><i class="fas fa-volume-up"></i> Pronunciaci√≥n</h3>
                <p>Escucha atentamente la pronunciaci√≥n de cada miembro familiar.</p>
            </div>
            
            <ul class="notes-list" role="list">
                <li role="listitem"><i class="fas fa-users"></i> <strong>Fam√≠lia (grande)</strong> - La familia extensa incluye abuelos, t√≠os y primos</li>
                <li role="listitem"><i class="fas fa-male"></i> <strong>Pap√° = Dad</strong> - El padre de la familia</li>
                <li role="listitem"><i class="fas fa-female"></i> <strong>Mam√° = Mom</strong> - La madre de la familia</li>
                <li role="listitem"><i class="fas fa-male"></i> <strong>Hermano = Bro</strong> - Hermano (forma informal)</li>
                <li role="listitem"><i class="fas fa-female"></i> <strong>Hermana = Sister</strong> - Hermana</li>
                <li role="listitem"><i class="fas fa-user-tie"></i> <strong>H√≠dio</strong> - T√©rmino especial para familiares cercanos</li>
                <li role="listitem"><i class="fas fa-headphones"></i> <strong>Audiado</strong> - Escucha la pronunciaci√≥n cuidadosamente</li>
                <li role="listitem"><i class="fas fa-brain"></i> <strong>Imag√©rio e s</strong> - Imagina y asocia cada miembro con su nombre</li>
                <li role="listitem"><i class="fas fa-heart"></i> <strong>Fam√≠lia es amor</strong> - La familia est√° basada en el amor y el cuidado</li>
            </ul>
        </section>

        <section class="interactive-zone" aria-labelledby="interactive-title">
            <h2 id="interactive-title" class="section-title"><i class="fas fa-gamepad"></i> Actividades Familiares</h2>
            
            <div class="instructions">
                <h3><i class="fas fa-info-circle"></i> C√≥mo aprender los miembros de la familia:</h3>
                <p>1. Toca cualquier miembro familiar para escuchar su nombre y pronunciaci√≥n.</p>
                <p>2. Usa los botones de accesibilidad para ajustar la p√°gina a tus necesidades.</p>
                <p>3. Juega al "Emparejamiento" para practicar la asociaci√≥n de nombres.</p>
                <p>4. Explora el √°rbol familiar para ver c√≥mo se relacionan los miembros.</p>
            </div>
            
            <div class="family-tree">
                <div class="tree-visual">
                    <div class="tree-person" tabindex="0" role="button" aria-label="Abuelo">
                        <div class="tree-person-icon">üë¥</div>
                        <div class="tree-person-name">Abuelo</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="Abuela">
                        <div class="tree-person-icon">üëµ</div>
                        <div class="tree-person-name">Abuela</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="Pap√°">
                        <div class="tree-person-icon">üë®</div>
                        <div class="tree-person-name">Pap√°</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="Mam√°">
                        <div class="tree-person-icon">üë©</div>
                        <div class="tree-person-name">Mam√°</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="Hermano">
                        <div class="tree-person-icon">üë¶</div>
                        <div class="tree-person-name">Hermano</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="Hermana">
                        <div class="tree-person-icon">üëß</div>
                        <div class="tree-person-name">Hermana</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="T√≠o">
                        <div class="tree-person-icon">üßî</div>
                        <div class="tree-person-name">T√≠o</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="T√≠a">
                        <div class="tree-person-icon">üë±‚Äç‚ôÄÔ∏è</div>
                        <div class="tree-person-name">T√≠a</div>
                    </div>
                    <div class="tree-person" tabindex="0" role="button" aria-label="Beb√©">
                        <div class="tree-person-icon">üë∂</div>
                        <div class="tree-person-name">Beb√©</div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="control-btn btn-family" id="meetFamilyBtn">
                    <i class="fas fa-handshake"></i> Conocer la Familia
                </button>
                <button class="control-btn btn-pronouns" id="practicePronounsBtn">
                    <i class="fas fa-microphone-alt"></i> Practicar Pronunciaci√≥n
                </button>
                <button class="control-btn btn-quiz" id="familyQuizBtn">
                    <i class="fas fa-question-circle"></i> Quiz Familiar
                </button>
            </div>
            
            <div class="feedback" id="feedback" role="status" aria-live="polite">
                <p>¬°Hola! Soy tu asistente familiar. Toca un miembro de la familia para conocerlo.</p>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <p><i class="fas fa-universal-access"></i> Aprendizaje familiar dise√±ado para ni√±os con discapacidad visual y auditiva</p>
        <p>Fam√≠lia 1 - Pronombres familiares con pronunciaci√≥n y traducci√≥n</p>
    </footer>

    <script>
        // Elementos DOM importantes
        const highContrastBtn = document.getElementById('highContrastBtn');
        const largeTextBtn = document.getElementById('largeTextBtn');
        const speakAllBtn = document.getElementById('speakAllBtn');
        const resetBtn = document.getElementById('resetBtn');
        const meetFamilyBtn = document.getElementById('meetFamilyBtn');
        const practicePronounsBtn = document.getElementById('practicePronounsBtn');
        const familyQuizBtn = document.getElementById('familyQuizBtn');
        const feedback = document.getElementById('feedback');
        const familyCards = document.querySelectorAll('.family-card');
        const treePersons = document.querySelectorAll('.tree-person');
        
        // Para s√≠ntesis de voz
        const speech = window.speechSynthesis;
        
        // Colores para alternar
        const colorSchemes = [
            { primary: '#FF7BAC', secondary: '#6C63FF', accent1: '#FFD166', accent2: '#06D6A0', accent3: '#118AB2', accent4: '#EF476F' },
            { primary: '#7BACFF', secondary: '#FF6C63', accent1: '#D166FF', accent2: '#A006D6', accent3: '#8AB211', accent4: '#7FEF47' },
            { primary: '#ACFF7B', secondary: '#6363FF', accent1: '#FF66D1', accent2: '#D6A006', accent3: '#11B28A', accent4: '#EF477F' }
        ];
        let currentColorScheme = 0;
        
        // Familia extendida con pronunciaciones
        const familyMembers = [
            { spanish: "Pap√°", english: "Dad", translation: "Padre", pronounciation: "dad", emoji: "üë®" },
            { spanish: "Mam√°", english: "Mom", translation: "Madre", pronounciation: "mam", emoji: "üë©" },
            { spanish: "Hermano", english: "Bro", translation: "Hermano", pronounciation: "bro", emoji: "üë¶" },
            { spanish: "Hermana", english: "Sister", translation: "Hermana", pronounciation: "s√≠s-ter", emoji: "üëß" },
            { spanish: "Abuelo", english: "Grandad", translation: "Abuelo", pronounciation: "gran-dad", emoji: "üë¥" },
            { spanish: "Abuela", english: "Grandma", translation: "Abuela", pronounciation: "gran-ma", emoji: "üëµ" },
            { spanish: "T√≠o", english: "Uncle", translation: "T√≠o", pronounciation: "an-cul", emoji: "üßî" },
            { spanish: "T√≠a", english: "Aunt", translation: "T√≠a", pronounciation: "ant", emoji: "üë±‚Äç‚ôÄÔ∏è" },
            { spanish: "Primo", english: "Cousin", translation: "Primo/Prima", pronounciation: "ka-sin", emoji: "üßí" },
            { spanish: "Beb√©", english: "Baby", translation: "Beb√©", pronounciation: "bey-bi", emoji: "üë∂" }
        ];
        
        // Funci√≥n para hablar texto
        function speakText(text) {
            if (speech.speaking) {
                speech.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'es-ES';
            utterance.rate = 0.8;
            utterance.pitch = 1.1;
            utterance.volume = 1;
            
            // Para palabras en ingl√©s
            if (text.includes('Dad') || text.includes('Mom') || text.includes('Bro') || 
                text.includes('Sister') || text.includes('Grandad') || text.includes('Grandma') || 
                text.includes('Uncle') || text.includes('Aunt') || text.includes('Cousin') || 
                text.includes('Baby')) {
                // Mezcla espa√±ol e ingl√©s
                utterance.lang = 'es-ES';
            }
            
            speech.speak(utterance);
            showFeedback(text);
        }
        
        // Funci√≥n para mostrar retroalimentaci√≥n
        function showFeedback(message) {
            feedback.innerHTML = `<p>${message}</p>`;
            feedback.classList.add('pulse');
            setTimeout(() => {
                feedback.classList.remove('pulse');
            }, 500);
        }
        
        // Seleccionar/deseleccionar tarjeta
        function toggleCardSelection(card) {
            // Quitar selecci√≥n de todas las tarjetas
            familyCards.forEach(c => c.classList.remove('selected'));
            treePersons.forEach(c => c.classList.remove('selected'));
            
            // Agregar selecci√≥n a la tarjeta clickeada
            card.classList.add('selected');
        }
        
        // Hablar miembro familiar al hacer clic
        familyCards.forEach((card, index) => {
            card.addEventListener('click', function() {
                const familyName = this.querySelector('.family-name').textContent;
                const familyPronoun = this.querySelector('.family-pronoun').textContent;
                const familyTranslation = this.querySelector('.family-translation').textContent;
                
                // Buscar en los datos
                const member = familyMembers.find(m => m.spanish === familyName) || 
                              { spanish: familyName, english: familyPronoun, translation: familyTranslation, pronounciation: familyPronoun.toLowerCase() };
                
                const textToSpeak = `${familyName}. En ingl√©s: ${member.english}. Se pronuncia: ${member.pronounciation}. Significa: ${member.translation}.`;
                speakText(textToSpeak);
                toggleCardSelection(this);
                
                // Efecto visual
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 200);
            });
            
            // Tambi√©n activar con teclado (Enter o espacio)
            card.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });
        
        // Hablar persona del √°rbol
        treePersons.forEach(person => {
            person.addEventListener('click', function() {
                const personName = this.querySelector('.tree-person-name').textContent;
                
                // Buscar en los datos
                const member = familyMembers.find(m => m.spanish === personName);
                
                if (member) {
                    const textToSpeak = `${member.spanish}. En el √°rbol familiar: ${member.spanish}. En ingl√©s: ${member.english}.`;
                    speakText(textToSpeak);
                } else {
                    speakText(`${personName}. Miembro de la familia.`);
                }
                
                toggleCardSelection(this);
                
                // Efecto visual
                this.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 200);
            });
            
            // Tambi√©n activar con teclado
            person.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });
        
        // Modo alto contraste
        highContrastBtn.addEventListener('click', function() {
            document.body.classList.toggle('high-contrast');
            const isActive = document.body.classList.contains('high-contrast');
            showFeedback(isActive ? 'Modo alto contraste activado' : 'Modo alto contraste desactivado');
            this.setAttribute('aria-pressed', isActive);
        });
        
        // Texto grande
        largeTextBtn.addEventListener('click', function() {
            document.body.classList.toggle('large-text');
            const isActive = document.body.classList.contains('large-text');
            showFeedback(isActive ? 'Texto grande activado' : 'Texto grande desactivado');
            this.setAttribute('aria-pressed', isActive);
        });
        
        // Leer todos los miembros de la familia
        speakAllBtn.addEventListener('click', function() {
            let allText = 'Miembros de la familia: ';
            
            familyMembers.forEach((member, index) => {
                allText += `${index + 1}. ${member.spanish}. En ingl√©s: ${member.english}. Se pronuncia: ${member.pronounciation}. `;
            });
            
            speakText(allText);
            showFeedback('Presentando a todos los miembros de la familia');
        });
        
        // Conocer la familia (presentaci√≥n)
        meetFamilyBtn.addEventListener('click', function() {
            let introText = "¬°Hola! Te voy a presentar a mi familia. ";
            
            // Presentar cada miembro con pausas
            setTimeout(() => {
                speakText("Este es mi pap√°. En ingl√©s se dice Dad. Es mi padre.");
            }, 500);
            
            setTimeout(() => {
                speakText("Esta es mi mam√°. En ingl√©s se dice Mom. Es mi madre.");
            }, 5000);
            
            setTimeout(() => {
                speakText("Este es mi hermano. En ingl√©s se dice Bro. Es mi hermano.");
            }, 9500);
            
            setTimeout(() => {
                speakText("Esta es mi hermana. En ingl√©s se dice Sister. Es mi hermana.");
            }, 14000);
            
            setTimeout(() => {
                speakText("Este es mi abuelo. En ingl√©s se dice Grandad. Es mi abuelo.");
            }, 18500);
            
            setTimeout(() => {
                speakText("Esta es mi abuela. En ingl√©s se dice Grandma. Es mi abuela.");
            }, 23000);
            
            setTimeout(() => {
                speakText("Este es mi t√≠o. En ingl√©s se dice Uncle. Es el hermano de mi pap√° o mi mam√°.");
            }, 27500);
            
            setTimeout(() => {
                speakText("Esta es mi t√≠a. En ingl√©s se dice Aunt. Es la hermana de mi pap√° o mi mam√°.");
            }, 32000);
            
            setTimeout(() => {
                speakText("Este es mi primo. En ingl√©s se dice Cousin. Es el hijo de mi t√≠o o mi t√≠a.");
            }, 36500);
            
            setTimeout(() => {
                speakText("Y este es el beb√© de la familia. En ingl√©s se dice Baby. Es el m√°s peque√±o.");
            }, 41000);
            
            showFeedback('Presentando a la familia completa...');
        });
        
        // Practicar pronunciaci√≥n
        practicePronounsBtn.addEventListener('click', function() {
            // Seleccionar un miembro aleatorio
            const randomIndex = Math.floor(Math.random() * familyMembers.length);
            const randomMember = familyMembers[randomIndex];
            
            const practiceText = `Vamos a practicar. Repite despu√©s de m√≠: ${randomMember.spanish}. En ingl√©s: ${randomMember.english}. Se pronuncia: ${randomMember.pronounciation}.`;
            
            speakText(practiceText);
            
            // Resaltar la tarjeta correspondiente
            familyCards.forEach(card => card.classList.remove('selected'));
            if (familyCards[randomIndex]) {
                familyCards[randomIndex].classList.add('selected');
                familyCards[randomIndex].style.transform = 'scale(1.05)';
                setTimeout(() => {
                    familyCards[randomIndex].style.transform = '';
                }, 1000);
            }
            
            showFeedback(`Practicando: ${randomMember.spanish} - ${randomMember.english}`);
        });
        
        // Quiz familiar
        familyQuizBtn.addEventListener('click', function() {
            // Seleccionar un miembro aleatorio para el quiz
            const quizIndex = Math.floor(Math.random() * familyMembers.length);
            const quizMember = familyMembers[quizIndex];
            
            // Crear opciones (la correcta y dos incorrectas)
            const options = [quizMember];
            while (options.length < 3) {
                const randomOption = familyMembers[Math.floor(Math.random() * familyMembers.length)];
                if (!options.some(opt => opt.spanish === randomOption.spanish)) {
                    options.push(randomOption);
                }
            }
            
            // Mezclar las opciones
            options.sort(() => Math.random() - 0.5);
            
            const quizText = `Quiz familiar: ¬øQui√©n es "${quizMember.english}" en espa√±ol?`;
            speakText(quizText);
            
            // Mostrar opciones en el feedback
            let optionsHTML = `<p><strong>Quiz:</strong> ¬øQui√©n es "${quizMember.english}" en espa√±ol?</p><div style="display: flex; flex-wrap: wrap; gap: 15px; margin-top: 15px;">`;
            options.forEach((option, idx) => {
                optionsHTML += `<button onclick="checkQuizAnswer('${quizMember.spanish}', '${option.spanish}')" 
                style="padding: 10px 20px; background: var(--accent1); border: none; border-radius: 10px; font-size: 1.2rem; cursor: pointer;">${option.spanish}</button>`;
            });
            optionsHTML += `</div>`;
            
            feedback.innerHTML = optionsHTML;
            feedback.classList.add('pulse');
            
            showFeedback(`Quiz: ¬øQui√©n es ${quizMember.english}?`);
        });
        
        // Funci√≥n global para verificar respuesta del quiz
        window.checkQuizAnswer = function(correctAnswer, selectedAnswer) {
            if (correctAnswer === selectedAnswer) {
                speakText(`¬°Correcto! ${correctAnswer} es ${familyMembers.find(m => m.spanish === correctAnswer).english} en ingl√©s.`);
                showFeedback(`¬°Excelente! ${correctAnswer} es la respuesta correcta.`);
                feedback.style.backgroundColor = '#E8F6F3';
            } else {
                speakText(`No es correcto. La respuesta correcta es ${correctAnswer}. ${correctAnswer} es ${familyMembers.find(m => m.spanish === correctAnswer).english} en ingl√©s.`);
                showFeedback(`Casi. La respuesta correcta es ${correctAnswer}.`);
                feedback.style.backgroundColor = '#FFE8E8';
            }
            
            setTimeout(() => {
                feedback.style.backgroundColor = '';
            }, 3000);
        };
        
        // Cambiar esquema de colores
        colorsBtn = document.getElementById('colorsBtn');
        if (colorsBtn) {
            colorsBtn.addEventListener('click', function() {
                currentColorScheme = (currentColorScheme + 1) % colorSchemes.length;
                const colors = colorSchemes[currentColorScheme];
                
                document.documentElement.style.setProperty('--primary', colors.primary);
                document.documentElement.style.setProperty('--secondary', colors.secondary);
                document.documentElement.style.setProperty('--accent1', colors.accent1);
                document.documentElement.style.setProperty('--accent2', colors.accent2);
                document.documentElement.style.setProperty('--accent3', colors.accent3);
                document.documentElement.style.setProperty('--accent4', colors.accent4);
                
                showFeedback(`Esquema de colores ${currentColorScheme + 1} activado`);
            });
        }
        
        // Reiniciar configuraci√≥n
        resetBtn.addEventListener('click', function() {
            document.body.classList.remove('high-contrast', 'large-text');
            
            // Quitar selecci√≥n de tarjetas
            familyCards.forEach(card => card.classList.remove('selected'));
            treePersons.forEach(person => person.classList.remove('selected'));
            
            // Restaurar colores originales
            const originalColors = colorSchemes[0];
            document.documentElement.style.setProperty('--primary', originalColors.primary);
            document.documentElement.style.setProperty('--secondary', originalColors.secondary);
            document.documentElement.style.setProperty('--accent1', originalColors.accent1);
            document.documentElement.style.setProperty('--accent2', originalColors.accent2);
            document.documentElement.style.setProperty('--accent3', originalColors.accent3);
            document.documentElement.style.setProperty('--accent4', originalColors.accent4);
            currentColorScheme = 0;
            
            // Restaurar feedback
            feedback.innerHTML = '<p>¬°Hola! Soy tu asistente familiar. Toca un miembro de la familia para conocerlo.</p>';
            feedback.style.backgroundColor = '';
            
            showFeedback('Configuraci√≥n restablecida');
        });
        
        // Inicializar atributos ARIA para botones toggle
        highContrastBtn.setAttribute('aria-pressed', 'false');
        largeTextBtn.setAttribute('aria-pressed', 'false');
        
        // Mensaje inicial
        window.addEventListener('load', function() {
            setTimeout(() => {
                showFeedback('¬°Bienvenido a la Familia 1! Aprende los pronombres familiares en espa√±ol e ingl√©s.');
            }, 1000);
        });
    </script>
</body>
</html>